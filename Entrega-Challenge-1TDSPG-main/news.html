<!DOCTYPE html>
<html lang="pt-br" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Porto Seguro</title>
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/styles-news.css">
    <link rel="stylesheet" href="css/responsivo.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
  </head>
  <body>
    <main class="apresentacao">
      <div class="center">
        <a href="index.html" class="logo">
          <i class="logomarca"></i>
        </a>
        <div class="">
          <a href="#" id="menu-mobile">
            <span></span>
            <span></span>
            <span></span>
          </a>
        </div>
        <nav class="menu" id="menu">
          <ul>
            <li class="menu__li">
              <a href="index.html" class="menu__link">Home</a>
            </li>
            <li class="menu__li">
              <a href="news.html" class="menu__link">Serviços</a>
            </li>
            <li class="menu__li">
              <a href="contact.html" class="menu__link">Contato</a>
            </li>
            <li class="menu__li">
              <a href="./login.html" class="menu__link">Login</a>
            </li>
          </ul>
        </nav>
        <div class="clear"></div>
      </div>
    
      <section class="section-top-margin">
        <div class="center">
          <header class="p-15">
            <h2 class="title align-left">Serviços</h2>
            <h5 class="subtitle align-left">Totalmente perzonalizado para você!</h5>
          </header>
          <div class="posts" id="posts"></div>
          <div class="pagination" id="pagination"></div>
        </div>
      </section>
    
      <section class="newsletter">
        <div class="center">
          <div class="newsletter__box">
            <div class="newsletter__wrapper">
              <div class="newsletter__content">
                <span class="newsletter__text"><br>Nós ajude a melhorar sua experiência!</span>
                <form action="#" method="post" class="newsletter__form">
                  <div class="newsletter__box-input">
                    <div class="newsletter__input-box">
                      <input type="text" name="#" value="#" class="newsletter__input" placeholder="Enter your email">
                    </div>
                  </div>
                  <div class="newsletter__box-submit">
                    <input class="newsletter__submit" type="submit" name="#" value="#">
                  </div>
                </form>
                <div class="clear"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <footer class="footer">
        <div class="center">
          <div class="footer__box">
            <i class="logomarca"></i>
            <p class="footer__descricao">Vem para a Porto Seguro!</p>
          </div>
    
          <nav class="footer__links">
            <strong class="footer__titulo">Rede social</strong>
            <ul>
              <li class="footer__menu-item"><a href="https://www.instagram.com/porto/" class="footer__link">Instagram</a></li>
              <li class="footer__menu-item"><a href="https://www.facebook.com/portoseguro/" class="footer__link">Facebook</a></li>
              <li class="footer__menu-item"><a href="https://www.portoseguro.com.br/" class="footer__link">Site</a></li>
              <li class="footer__menu-item"><a href="https://api.whatsapp.com/send?1=pt_BR&phone=551130039303&text=Oi,%20Porto%20Seguro%20!" class="footer__link">Whatsapp</a></li>
            </ul>
          </nav>
          <nav class="footer__pages">
            <strong class="footer__titulo">Páginas</strong>
            <ul>
              <li class="footer__menu-item"><a href="./index.html" class="footer__link">Home</a></li>
              <li class="footer__menu-item"><a href="./news-detail.html" class="footer__link">Menu</a></li>
              <li class="footer__menu-item"><a href="./news.html" class="footer__link">Serviços</a></li>
              <li class="footer__menu-item"><a href="./contact.html" class="footer__link">Contato</a></li>
            </ul>
          </nav>
          <nav class="footer__legal">
            <strong class="footer__titulo">Mais informações</strong>
            <ul>
              <li class="footer__menu-item"><a href="#" class="footer__link">SAC</a></li>
              <li class="footer__menu-item"><a href="#" class="footer__link">Ouvidoria</a></li>
              <li class="footer__menu-item"><a href="#" class="footer__link">Perguntas</a></li>
              <li class="footer__menu-item"><a href="#" class="footer__link">FAQ</a></li>
            </ul>
          </nav>
          <div class="clear"></div>
        </div>
      </footer>
    </main>
    


  <script type="text/javascript" src="js/menu.js"></script>
  <script type="text/javascript" src="js/posts.js"></script>
  <script type="text/javascript" src="js/getUrlVars.js"></script>
  <script type="text/javascript">
    //  ------------------------------------------
    //  paginação
    function pagination (page, total, limit) {
      var pageSize = Math.ceil(total/limit);

      var _pagination = {
          page: page,
          total: total,
          limit: limit,
          pages: pageSize
        };

      if(page > 1){
        var prev = page-1;
        _pagination.previous = prev;
      }

      var remaining = total - (page * limit);

      if(remaining > 0){
        _pagination.next = page+1;
      }

      return _pagination;
    }

    var array = posts;
    var pageQuery = getUrlVars()["pagina"];

    var page = parseInt(pageQuery) || 1;
    var limit = 6;
    var offset = (page - 1) * limit;
    var total = array.length;
    var items = array.slice(offset, offset+limit);
    var paginationResult = pagination(page, total, limit);
    // console.log(items);
    // console.log(pagination(page, total, limit));

    //-------------
    var postsHtml = '';
    for (var i = 0; i < items.length; i++) {
      var post = items[i];
      var html = '<div class="col col--3 mb-40 col--small-2 col--mobile-1">'+
        '<div class="post-box">'+
          '<div class="post__wrapper">'+
            '<a href="news-detail.html?id='+(i+1)+'" class="post__link">'+
              '<div class="post__imagem">'+
                '<img src="'+post.imagem+'" alt="" class="img-responsiva">'+
              '</div>'+
              '<div class="post__content">'+
                '<span class="post__title" id="titulo">'+post.titulo+'</span>'+
                '<p class="post__subtitle">By <strong id="autor">'+post.autor+'</strong> |  '+post.data+'</p>'+
              '</div>'+
            '</a>'+
          '</div>'+
        '</div>'+
      '</div>';
      postsHtml += html;
    }

    postsHtml += '<div class="clear"></div>';

    document.getElementById("posts").innerHTML = postsHtml;

    if (pageQuery > paginationResult.pages) {
      document.getElementById("posts").innerHTML = "Nenhum item encontrado";
    }

    //----------
    var paginationItems = '';
    for (var i = 0; i < paginationResult.pages; i++) {
      var paginaAtiva = i+1;
      var ativo = page === paginaAtiva ? 'ativo' : '';
      paginationItems += '<a class="pagination__link '+ativo+'" href="news.html?pagina='+paginaAtiva+'">'+paginaAtiva+'</a>';
    }
    document.getElementById('pagination').innerHTML = paginationItems;

  </script>
  </body>
</html>
